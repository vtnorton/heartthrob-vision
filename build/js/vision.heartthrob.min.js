function hVision(e){e=e||{};var t={subscriptionKey:"",uriBase:"",language:"en",imageWithEmptyAlt:!1,localProjectWarning:!0};for(var o in t)"boolean"!=typeof e[o]&&(e[o]=e[o]||t[o]);e.localProjectWarning&&!window.location.hostname.startsWith("http")?console.warn("heartthrob-vision: your project/images must be online to have caption in your images. More info at: https://heartthrob.vtnorton.com/vision"):document.querySelectorAll("img").forEach(function(t){t.hasAttribute("alt")?!t.getAttribute("alt").trim()&&e.imageWithEmptyAlt&&hProcessImage(t,e):hProcessImage(t,e)})}function hProcessImage(e,t){var o='{"url": "'+hGetImageSource(e)+'"}',i=new Headers;i.append("Content-Type","application/json"),i.append("Ocp-Apim-Subscription-Key",t.subscriptionKey),fetch(t.uriBase+"?visualFeatures=Description&details=&language="+t.language,{method:"POST",headers:i,body:o}).then(function(t){if(!t.ok)throw Error(t.statusText);e.setAttribute("alt",t.description.captions[0].text),console.log(JSON.stringify(t,null,2))}).catch(function(t){console.log("There was an error with your request. Check if you are not using a local image. Error: "+t)})}function hGetImageSource(t){var e=t.getAttribute("src");if(!e.startsWith("http")){var o=location.host,i=window.location.href.indexOf(o),r=window.location.href.slice(i+o.length),n=r.substring(0,r.lastIndexOf("/"));if(e.startsWith("./")&&(e=e.replace("./","")),e.startsWith(".."))for(var a=e.split("../").length-1,s=0;s<a;s++)e=e.replace("../",""),n=n.substring(0,n.lastIndexOf("/"));e=e.startsWith("/")?n+e:n+"/"+e}return e}